<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>codestral-introduction • codestral</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="codestral-introduction">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">codestral</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/codestral-introduction.html">codestral-introduction</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/urbs-dev/codestral/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>codestral-introduction</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/urbs-dev/codestral/blob/HEAD/vignettes/codestral-introduction.Rmd" class="external-link"><code>vignettes/codestral-introduction.Rmd</code></a></small>
      <div class="hidden name"><code>codestral-introduction.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="codestral">codestral<a class="anchor" aria-label="anchor" href="#codestral"></a>
</h2>
<!-- badges: start -->
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a> <!-- badges: end --></p>
<p>Thanks to an appropriate Rstudio addin, this package allows prompting
<a href="https://mistral.ai/" class="external-link">Mistra AI</a> models using their API for
fill in the middle (FIM) and chat in Rstudio. Installing this package
creates an Addin in Rstudio that allows a direct and simple use of the
Mistral AI API.</p>
<p>For FIM, the <a href="https://mistral.ai/news/codestral" class="external-link">Codestral</a> model is
used.</p>
<p>For chatting, the user may use either Codestral or <a href="https://mistral.ai/news/codestral-mamba" class="external-link">Codestral Mamba</a>.</p>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>You should first get 2 API keys from the Mistral AI <a href="https://mistral.ai/news/la-plateforme" class="external-link">Plateforme</a>:</p>
<ul>
<li>one general Mistral AI API key (menu <code>API</code> in La
Plateforme).</li>
<li>one Codestral API key (menu <code>Codestral</code> in La
Plateforme).</li>
</ul>
<p>You can install the development version of codestral from <a href="https://github.com/urbs-dev/codestral" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"urbs-dev/codestral"</span><span class="op">)</span></span></code></pre></div>
<p>Restart your session to activate the addin.</p>
<p><strong>The addin is now visible in the Rstudio <code>Addins</code>
drop down list as <code>Codestral code completion</code>.</strong></p>
</div>
<div class="section level3">
<h3 id="set-up-for-usage-in-rstudio">Set up for usage in Rstudio<a class="anchor" aria-label="anchor" href="#set-up-for-usage-in-rstudio"></a>
</h3>
<p>The package needs to be initialized, especially to get your API
key.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://urbs-dev.github.io/codestral/" class="external-link">codestral</a></span><span class="op">)</span></span>
<span><span class="co">## basic example code</span></span>
<span></span>
<span><span class="co"># codestral_init(mistral_apikey = "your-api-key-here", codestral_apikey = "your_codestral-api-key-here")</span></span></code></pre></div>
<p>This function also sets some parameters for using the Mistral AI API
properly. Once you get familiar with the package, you may customize
those parameters.</p>
</div>
<div class="section level3">
<h3 id="a-simple-example-to-start-with">A simple example to start with<a class="anchor" aria-label="anchor" href="#a-simple-example-to-start-with"></a>
</h3>
<p>Open a new text file and type: <code>"m: Hello world !"</code>. Leave
your cursor at the end of the line.</p>
<p>In the Rstudio toolbar, look for the <code>Addins</code> drop down
menu and click on <code>Codestral code completion</code>.</p>
<p>The model’s answer should appear in your text file starting with
<code>a:</code>.</p>
<p>In your console note that the function
<code>codestral:::insert_addin()</code> has been called.</p>
</div>
<div class="section level3">
<h3 id="using-codestral-package">Using codestral package<a class="anchor" aria-label="anchor" href="#using-codestral-package"></a>
</h3>
<div class="section level4">
<h4 id="fill-in-the-middle-fim">Fill in the middle (FIM)<a class="anchor" aria-label="anchor" href="#fill-in-the-middle-fim"></a>
</h4>
<p>Place your cursor where you want the FIM code to appear and look for
<code>Codestral code completion</code> in the <code>Addins</code> drop
down menu of <code>RStudio</code>.</p>
<p>When you click on the addin, the Codestral answer is inserted. In the
request, the prompt is the part of the script before the cursor, the
suffix is the part of the script after the cursor. The answer is limited
to <code>max_tokens$FIM</code> as set in <code>codestral_init</code>. In
case you feel the FIM is incomplete, you may just activate the addin
again.</p>
</div>
<div class="section level4">
<h4 id="chat">Chat<a class="anchor" aria-label="anchor" href="#chat"></a>
</h4>
<ul>
<li><p>To prompt the Codestral model: The current script should start
with <code>c:</code>. Place your cursor at the end of your question.
Activate the addin as for FIM. The answer is inserted from the line
after your cursor position.</p></li>
<li><p>To prompt the Codestral Mamba model: Just replace <code>c:</code>
with <code>m:</code>.</p></li>
</ul>
<p>In both cases, the answer will start with <code>a:</code>.</p>
<p>You can follow up the dialog starting a new line with <code>c:</code>
or <code>m:</code> after the model’s answer.</p>
</div>
<div class="section level4">
<h4 id="include-chosen-files-content">Include chosen files content<a class="anchor" aria-label="anchor" href="#include-chosen-files-content"></a>
</h4>
<p>If you wish to include a text file (.R, .Rmd …) in your prompt, just
make sure that the file is in the current working directory or one of
its subdirectories (for instance in the same project) and add a line in
your prompt starting by “ff:” and followed by the file name :
<code>"ff:my_file.R"</code></p>
<p>Behind the scene, <code>ff:</code> triggers the insertion of the
content of <code>my_file.R</code> at the location where the instruction
has been placed.</p>
<p>Example:</p>
<pre><code><span><span class="co"># m: Write the necessary unit tests for the following functions</span></span>
<span><span class="co"># ff:my_fun_file.R</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="include-all-r-files-while-developing-r-extensions-packages">Include all R files while developing R extensions (packages)<a class="anchor" aria-label="anchor" href="#include-all-r-files-while-developing-r-extensions-packages"></a>
</h4>
<p>If you are developing a package, you may want to include all R files
in the current working directory and its subdirectories. This is the
default behaviour. If you want to disable this feature, you can set the
environment variable to <code>FALSE</code> with the function
<code>allow_detect_package(FALSE)</code>.</p>
</div>
<div class="section level4">
<h4 id="modify-the-assistant-behaviour-role-">Modify the assistant behaviour (role).<a class="anchor" aria-label="anchor" href="#modify-the-assistant-behaviour-role-"></a>
</h4>
<p>By default, when initializing the package, the assistant role is
described as “You write programs in R language only. You adopt a proper
coding approach by strictly naming all the functions’ parameters when
calling any function with named parameters even when calling nested
functions, by being straighforward in your answers.” This can be
modified when initializing the package with the parameter
<code>role_content</code> of <code>codestral_init</code>. However, the
user may find it usefull to modify this role temporarily. This can be
achieved with the marker <code>s:</code>.</p>
<p>Example:</p>
<pre><code><span><span class="co"># s: you are an sql developer.</span></span>
<span><span class="co"># m: How do joints work?</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="make-it-more-efficient-using-keyboard-shortcut">Make it more efficient using keyboard shortcut<a class="anchor" aria-label="anchor" href="#make-it-more-efficient-using-keyboard-shortcut"></a>
</h3>
<p>In order to define a keyboard shortcut for this addin, in Rstudio,
choose the menu <code>Tools/Addins/Browse Addins...</code> In the pop-up
window, click on the <code>Keyboard shortcuts</code> button. in the new
window, double click on the table’s cell at row
<code>Codestral code completion</code> and column <code>Shortcut</code>.
Insert your shortcut.</p>
<p>You can now replace default usage by your shortcut.</p>
<p>Additionnaly you may add the initialization step in an
<code>.Rprofile</code> so that initialization is performed at any
session start.</p>
</div>
<div class="section level3">
<h3 id="information-about-your-data">Information about your data<a class="anchor" aria-label="anchor" href="#information-about-your-data"></a>
</h3>
<p>Keep in mind that the point of this addin is to communicate with an
API. No AI model is installed locally. Therefore every time you activate
the addin, the content of the file where your cursor is, will be sent to
Mistral AI. If <code>ff:my_file.R</code> is present in this file, then
the content of <code>my_file.R</code> is also sent to Mistral AI.</p>
<p>The other information sent to Mistral AI is the content of the
environment variables created by <code><a href="../reference/codestral_init.html">codestral_init()</a></code>.</p>
<p><strong>Nothing else is sent to Mistral AI and nothing is sent to a
third party.</strong></p>
<p>Note that if you are using the free services of Mistral AI, the data
you sent may be used by them for training their future models. Visit
their website for more information.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Marc Grossouvre, URBS company.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
